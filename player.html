<!doctype html>
<html lang="ca">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>La casa del terror</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#220000,#110000);
  color:#fff;
  text-align:center;
  padding:40px;
}
h1{
  font-size: 34px;
  letter-spacing: 3px;
  font-weight: 900;
  margin-bottom: 22px;
  text-transform: uppercase;
  text-shadow: 2px 2px 0 #000, 4px 4px 0 #000;
}
@media (max-width: 480px){
  body{ padding:20px; }
  h1{ font-size: 28px; letter-spacing:2px; }
}
.card{
  max-width:720px;
  margin:auto;
  padding:32px;
  border-radius:16px;
  background: rgba(0,0,0,0.7);
  box-shadow:0 0 40px rgba(255,0,0,0.4);
}
.back{
  display:inline-block;
  color:#00ff00;
  text-decoration:none;
  margin-bottom:14px;
  opacity:.85;
}
.back:hover{ opacity:1; text-decoration:underline; }

img{
  width:100%;
  max-width:360px;
  border-radius:12px;
  margin:24px 0;
  box-shadow:0 0 20px rgba(255,0,0,0.3);
  cursor:pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}
img:hover{
  transform:scale(1.03);
  box-shadow:0 0 25px #ff4444,0 0 50px #ff1111;
}
.controls{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
  margin-bottom:20px;
}
button{
  border:none;
  border-radius:50%;
  width:50px;
  height:50px;
  font-size:18px;
  font-weight:bold;
  background:#00ff00;
  color:#111;
  cursor:pointer;
  box-shadow:0 0 8px #00ff00,0 0 16px #00ff00;
  transition:0.3s;
}
button:hover{
  transform: scale(1.15);
  box-shadow:0 0 20px #00ff00,0 0 40px #ff0000;
}
.progress-wrapper{
  display:flex;
  align-items:center;
  justify-content:space-between;
  width:80%;
  margin:auto;
}
.progress-container{
  flex:1;
  height:8px;
  background: rgba(0,255,0,0.3);
  border-radius:4px;
  margin:0 10px;
  cursor:pointer;
  overflow:hidden;
}
.progress-bar{
  width:0%;
  height:100%;
  border-radius:4px;
  background: linear-gradient(270deg,#00ff00,#00cc00,#00ff00);
  background-size:600% 100%;
  animation: flow 4s linear infinite;
  transition: width 0.1s linear;
}
@keyframes flow{ 0%{background-position:0%} 100%{background-position:600%} }
#current-time,#total-time{
  font-size:14px;
  color:#00ff00;
  min-width:35px;
}
.volume-wrapper{
  margin-top:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.volume-icon{
  font-size:18px;
  color:#00ff00;
  text-shadow:0 0 6px #00ff00;
  cursor:pointer;
}
#volume-slider{ width:120px; height:4px; cursor:pointer; }
.playlist{
  margin-top:25px;
  text-align:left;
}
.track{
  padding:10px 14px;
  border-radius:8px;
  background: rgba(0,255,0,0.05);
  margin:8px 0;
  transition: background 0.3s, transform 0.2s;
  cursor:pointer;
}
.track:hover{ background: rgba(0,255,0,0.15); transform:scale(1.02); }
.track.current{
  background: rgba(0,255,0,0.25);
  box-shadow:0 0 20px #00ff00,0 0 40px #00ff00;
}
@keyframes coverChange{
  0%{ transform: scale(1); }
  30%{ transform: scale(1.05); }
  60%{ transform: scale(0.98); }
  100%{ transform: scale(1); }
}
.cover-animate{ animation: coverChange 0.5s ease; }
</style>
</head>

<body>
<div class="card">

  <a href="index.html" class="back">‚Üê Tornar</a>

  <h1>Cosmic Marciana</h1>

  <img id="cover" src="cover1.png" alt="Portada" onclick="togglePlay()">

  <div class="controls">
    <button onclick="prevTrack()" aria-label="Anterior">‚èÆ</button>
    <button id="play-pause" onclick="togglePlay()" aria-label="Play/Pause">‚ñ∂</button>
    <button onclick="stopTrack()" aria-label="Stop">‚èπ</button>
    <button onclick="nextTrack()" aria-label="Seg√ºent">‚è≠</button>
  </div>

  <div class="progress-wrapper">
    <span id="current-time">0:00</span>
    <div class="progress-container" onclick="seek(event)">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <span id="total-time">0:00</span>
  </div>

  <div class="volume-wrapper">
    <span class="volume-icon" id="volume-icon">üîä</span>
    <input type="range" id="volume-slider" min="0" max="100" value="100">
  </div>

  <div class="playlist">
    <div class="track" data-index="0">Los pobres m√°s</div>
    <div class="track" data-index="1">Canco 2</div>
    <div class="track" data-index="2">Canco 3</div>
    <div class="track" data-index="3">Canco 4</div>
    <div class="track" data-index="4">Canco 5</div>
    <div class="track" data-index="5">Canco 6</div>
    <div class="track" data-index="6">Canco 7</div>
    <div class="track" data-index="7">Canco 8</div>
    <div class="track" data-index="8">Canco 9</div>
    <div class="track" data-index="9">Canco 10</div>
    <div class="track" data-index="10">Canco 11</div>
  </div>

  <audio id="audio" preload="metadata"></audio>
</div>

<script>
const tracks = Array.from(document.querySelectorAll(".track"));
const audio = document.getElementById("audio");
const progressBar = document.getElementById("progress-bar");
const playPauseBtn = document.getElementById("play-pause");
const coverImg = document.getElementById("cover");
const currentTimeEl = document.getElementById("current-time");
const totalTimeEl = document.getElementById("total-time");

const volumeSlider = document.getElementById("volume-slider");
const volumeIcon = document.getElementById("volume-icon");

let currentIndex = 0;
let lastVolume = 1;

const sources = [
  "lospobres.mp3","canco2.mp3","canco3.mp3","canco4.mp3","canco5.mp3",
  "canco6.mp3","canco7.mp3","canco8.mp3","canco9.mp3","canco10.mp3","canco11.mp3"
];

const covers = [
  "cover1.png","cover2.jpg","cover3.png","cover4.png","cover5.png",
  "cover6.png","cover7.png","cover8.png","cover9.png","cover10.png","cover11.png"
];

function formatTime(t){
  const m = Math.floor(t/60);
  const s = Math.floor(t%60);
  return m + ":" + ("0"+s).slice(-2);
}

function loadTrack(index){
  audio.src = sources[index];
  coverImg.src = covers[index];

  tracks.forEach(t=>t.classList.remove("current"));
  tracks[index].classList.add("current");

  coverImg.classList.remove("cover-animate");
  void coverImg.offsetWidth;
  coverImg.classList.add("cover-animate");
}

function playTrack(index){
  currentIndex = index;
  loadTrack(index);

  audio.play().then(()=>{
    playPauseBtn.textContent="‚è∏";
  }).catch(()=>{
    playPauseBtn.textContent="‚ñ∂";
  });
}

function togglePlay(){
  if(audio.src === "" || !audio.src){
    playTrack(currentIndex);
    return;
  }
  if(audio.paused){
    audio.play().then(()=> playPauseBtn.textContent="‚è∏").catch(()=>{});
  } else {
    audio.pause();
    playPauseBtn.textContent="‚ñ∂";
  }
}

function stopTrack(){
  audio.pause();
  audio.currentTime = 0;
  playPauseBtn.textContent="‚ñ∂";
}

function nextTrack(){
  currentIndex = (currentIndex+1) % tracks.length;
  playTrack(currentIndex);
}

function prevTrack(){
  currentIndex = (currentIndex-1+tracks.length) % tracks.length;
  playTrack(currentIndex);
}

tracks.forEach(track=>{
  track.addEventListener("click", ()=>{
    playTrack(parseInt(track.dataset.index,10));
  });
});

audio.addEventListener("timeupdate", ()=>{
  if(!audio.duration) return;
  currentTimeEl.textContent = formatTime(audio.currentTime);
  totalTimeEl.textContent = formatTime(audio.duration);
  progressBar.style.width = (audio.currentTime / audio.duration * 100) + "%";
});

function seek(event){
  if(!audio.duration) return;
  const rect = event.currentTarget.getBoundingClientRect();
  const pct = (event.clientX - rect.left) / rect.width;
  audio.currentTime = pct * audio.duration;
}

audio.addEventListener("ended", ()=> nextTrack());

volumeSlider.addEventListener("input", ()=>{
  audio.volume = volumeSlider.value / 100;
  lastVolume = audio.volume;
  updateVolumeIcon();
});

function updateVolumeIcon(){
  if(audio.volume === 0) volumeIcon.textContent = "üîá";
  else if(audio.volume < 0.5) volumeIcon.textContent = "üîâ";
  else volumeIcon.textContent = "üîä";
}

volumeIcon.addEventListener("click", ()=>{
  if(audio.volume > 0){
    lastVolume = audio.volume;
    audio.volume = 0;
    volumeSlider.value = 0;
  } else {
    audio.volume = lastVolume || 1;
    volumeSlider.value = (audio.volume * 100);
  }
  updateVolumeIcon();
});

// Init
loadTrack(0);
audio.volume = 1;
updateVolumeIcon();
</script>
</body>
</html>
