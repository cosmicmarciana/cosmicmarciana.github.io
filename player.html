/* ============================
   ✅ VU METER ANALÓGICO 1978 (DIAL)
   ============================ */
.track{ position: relative; overflow:hidden; }

.track.current{ padding-right: 118px; }

/* DIAL */
.track.current::before{
  content:"";
  position:absolute;
  right:10px;
  top:50%;
  width:88px;
  height:52px;
  transform: translateY(-50%);
  border-radius: 14px;
  background:
    /* cristall */
    radial-gradient(120% 140% at 20% 20%, rgba(255,255,255,.10), rgba(0,0,0,0) 60%),
    /* fons paper ambre */
    radial-gradient(120% 130% at 50% 120%, rgba(255,210,130,.12), rgba(0,0,0,0) 55%),
    linear-gradient(180deg, rgba(18,12,6,.92), rgba(10,7,3,.92));
  border: 1px solid rgba(255,180,60,.38);
  box-shadow:
    inset 0 0 10px rgba(255,200,120,.08),
    0 0 18px rgba(255,140,0,.14);
  pointer-events:none;
  isolation:isolate;
}

/* Escala + text “VU” dins el dial */
.track.current::before{
  background-image:
    radial-gradient(120% 140% at 20% 20%, rgba(255,255,255,.10), rgba(0,0,0,0) 60%),
    radial-gradient(120% 130% at 50% 120%, rgba(255,210,130,.12), rgba(0,0,0,0) 55%),
    linear-gradient(180deg, rgba(18,12,6,.92), rgba(10,7,3,.92)),
    /* ticks semicercle (simulació) */
    conic-gradient(
      from 210deg,
      rgba(255,180,60,.0) 0deg,
      rgba(255,180,60,.0) 6deg,
      rgba(255,180,60,.55) 6deg,
      rgba(255,180,60,.55) 7deg,
      rgba(255,180,60,.0) 7deg,
      rgba(255,180,60,.0) 14deg,
      rgba(255,180,60,.40) 14deg,
      rgba(255,180,60,.40) 15deg,
      rgba(255,180,60,.0) 15deg,
      rgba(255,180,60,.0) 165deg
    );
  background-blend-mode: screen, normal, normal, screen;
}

/* Etiqueta VU (petita) */
.track.current .vu-label{
  display:none;
}

/* Agulla (una línia fina) */
body.playing .track.current::after,
body.paused  .track.current::after{
  content:"";
  position:absolute;
  right:10px;
  top:50%;
  width:88px;
  height:52px;
  transform: translateY(-50%);
  pointer-events:none;

  /* dibuixem l’agulla dins el “dial” */
  background:
    linear-gradient(
      90deg,
      transparent 0%,
      transparent 48%,
      rgba(255,245,210,.95) 49%,
      rgba(255,120,0,1) 50%,
      rgba(255,40,0,.9) 51%,
      transparent 52%,
      transparent 100%
    );

  /* pivot a la part baixa-esquerra del dial */
  transform-origin: 18px 44px;
  filter: drop-shadow(0 0 8px rgba(255,140,0,.45));
  opacity:.95;
}

/* Moviment pesat (estudi vell) */
body.playing .track.current::after{
  animation: vuDial calc(1.25s - (.45s * var(--g))) cubic-bezier(.2, .8, .2, 1) infinite;
}

/* En pausa: vida molt lenta */
body.paused .track.current::after{
  animation: vuDial 2.2s ease-in-out infinite;
  opacity:.82;
}

@keyframes vuDial{
  0%   { transform: translateY(-50%) rotate(calc(-52deg + (10deg * var(--g)))); }
  22%  { transform: translateY(-50%) rotate(calc(-18deg + (14deg * var(--g)))); }
  48%  { transform: translateY(-50%) rotate(calc( 28deg + (16deg * var(--g)))); }
  68%  { transform: translateY(-50%) rotate(calc( -6deg + (10deg * var(--g)))); }
  86%  { transform: translateY(-50%) rotate(calc( 40deg + (18deg * var(--g)))); }
  100% { transform: translateY(-50%) rotate(calc( 18deg + (12deg * var(--g)))); }
}

@media (max-width:480px){
  .track.current{ padding-right: 108px; }
  .track.current::before,
  .track.current::after{
    width:80px;
    height:48px;
  }
}
