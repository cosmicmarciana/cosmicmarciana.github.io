<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>La casa del terror</title>

<link rel="icon" href="favicon.ico">

<style>
:root{
  --neon:#00ff00;
  --ink:#eaeaea;
  --muted:#cfcfcf;
  --blood:#ff2b2b;
  --g:0;
}

*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; }
body{
  font-family:Arial,sans-serif;
  background:#050303;
  color:var(--ink);
  display:flex;
  justify-content:center;
}

.wrap{
  width:100%;
  max-width:820px;
  text-align:center;
  padding:24px;
}

h1{
  letter-spacing:.22em;
  font-size:22px;
  text-transform:uppercase;
}

/* ===== CRT ===== */
.crt{
  position:relative;
  width:420px;
  margin:20px auto;
}

#cover{
  width:100%;
  display:block;
}

/* ===== PANTALLA ===== */
.tv-screen{
  position:absolute;
  left:17.63%;
  top:22.75%;
  width:62.99%;
  height:46.83%;
  overflow:hidden;
  pointer-events:none;
}

/* ===== VHS ===== */
.vhs{
  position:absolute;
  inset:-14%;
  opacity:0;
  mix-blend-mode:screen;
  filter:contrast(1.2);
}

body.playing .vhs{
  opacity:calc(0.25 + 0.75 * var(--g));
  animation:vhsMove .6s infinite steps(2,end);
}

body.paused .vhs{
  opacity:calc(0.25 + 0.75 * var(--g));
  animation:none;
}

.vhs::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.04),
      rgba(255,255,255,.04) 1px,
      transparent 3px
    );
}

.vhs::after{
  content:"";
  position:absolute;
  left:0; right:0;
  top:-30%;
  height:20%;
  background:linear-gradient(
    to bottom,
    transparent,
    rgba(255,255,255,.35),
    transparent
  );
  animation:vhsTrack 1.2s infinite linear;
}

body.paused .vhs::after{
  animation:none;
}

@keyframes vhsMove{
  0%{transform:translate(0,0)}
  50%{transform:translate(-2px,1px)}
  100%{transform:translate(0,0)}
}

@keyframes vhsTrack{
  from{transform:translateY(-20%)}
  to{transform:translateY(600%)}
}

/* ===== CONTROLES ===== */
.controls{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:12px 0;
}

button{
  border:none;
  padding:10px 14px;
  border-radius:999px;
  cursor:pointer;
}

/* ===== PLAYLIST ===== */
.playlist{
  margin-top:18px;
  text-align:left;
}

.track{
  padding:10px 14px;
  border-radius:10px;
  background:rgba(255,255,255,.05);
  margin:6px 0;
  cursor:pointer;
}

.track.current{
  background:rgba(0,255,0,.15);
  color:var(--neon);
}
</style>
</head>

<body>
<main class="wrap">

<h1>Cosmic Marciana</h1>

<div class="crt">
  <img id="cover" src="tv.png" alt="">
  <div class="tv-screen">
    <div class="vhs"></div>
  </div>
</div>

<div class="controls">
  <button id="prev">Prev</button>
  <button id="play">Play / Pause</button>
  <button id="stop">Stop</button>
  <button id="next">Next</button>
</div>

<div class="playlist" id="playlist">
  <div class="track" data-i="0">1. Noche sintética</div>
  <div class="track" data-i="1">2. Volveremos a empezar</div>
  <div class="track" data-i="2">3. Quién llena los shows</div>
  <div class="track" data-i="3">4. STOP!</div>
  <div class="track" data-i="4">5. Reza</div>
  <div class="track" data-i="5">6. De pie</div>
  <div class="track" data-i="6">7. Quemarlo todo</div>
  <div class="track" data-i="7">8. Nadie sabe nada</div>
  <div class="track" data-i="8">9. Lo que no quiero</div>
  <div class="track" data-i="9">10. La casa del terror</div>
  <div class="track" data-i="10">11. Tenemos que hablar</div>
</div>

<audio id="audio"></audio>

</main>

<script>
const audio = document.getElementById("audio");
const cover = document.getElementById("cover");
const tracksEls = document.querySelectorAll(".track");

const tracks = [
  "lospobres.mp3","vae.mp3","shows.mp3","canco4.mp3","canco5.mp3",
  "canco6.mp3","canco7.mp3","canco8.mp3","canco9.mp3","canco10.mp3","canco11.mp3"
];

const tvs = [
  "tv1.png","tv2.png","tv3.png","tv4.png","tv5.png","tv6.png",
  "tv7.png","tv8.png","tv9.png","tv10.png","tv11.png"
];

let index = 0;

function updateGlitch(){
  if(!audio.src){
    document.documentElement.style.setProperty("--g",0);
    return;
  }
  if(audio.paused){
    document.documentElement.style.setProperty("--g","0.35");
  }else{
    document.documentElement.style.setProperty("--g", Math.max(.25,audio.volume));
  }
}

function updateState(){
  document.body.classList.toggle("playing", !audio.paused && audio.src);
  document.body.classList.toggle("paused", audio.paused && audio.src);
  updateGlitch();
}

function load(i){
  index=i;
  audio.src=tracks[i];
  cover.src=tvs[i];
  audio.load();
  tracksEls.forEach(t=>t.classList.remove("current"));
  tracksEls[i].classList.add("current");
}

function play(){
  if(!audio.src) load(index);
  audio.play();
}

function stop(){
  audio.pause();
  audio.removeAttribute("src");
  cover.src="tv.png";
  tracksEls.forEach(t=>t.classList.remove("current"));
  updateState();
}

document.getElementById("play").onclick=()=>{
  audio.paused?play():audio.pause();
};
document.getElementById("stop").onclick=stop;
document.getElementById("next").onclick=()=>{load((index+1)%tracks.length);play();}
document.getElementById("prev").onclick=()=>{load((index-1+tracks.length)%tracks.length);play();}

tracksEls.forEach(t=>{
  t.onclick=()=>{load(+t.dataset.i);play();}
});

audio.addEventListener("play",updateState);
audio.addEventListener("pause",updateState);
audio.addEventListener("volumechange",updateGlitch);
</script>

</body>
</html>
