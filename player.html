<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>La casa del terror</title>

<!-- Favicons -->
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="manifest" href="site.webmanifest">

<style>
/* ================== VARIABLES ================== */
:root{
  --neon:#00ff00;
  --ink:#eaeaea;
  --muted:#cfcfcf;
}

/* ================== RESET ================== */
*{ box-sizing:border-box; }
html,body{ -webkit-tap-highlight-color:transparent; }
button,a{ outline:none; }

/* ================== BODY ================== */
body{
  margin:0;
  font-family: Arial, sans-serif;
  color:var(--ink);
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:32px 14px;
  background:#050303;
}

/* ================== WRAP ================== */
.wrap{
  width:100%;
  max-width:820px;
  text-align:center;
}

/* ================== TITLE ================== */
h1{
  font-size:22px;
  letter-spacing:.22em;
  text-transform:uppercase;
  margin-bottom:12px;
}

/* ================== CRT ================== */
.crt{
  margin:14px auto;
  cursor:pointer;
}
#cover{
  max-width:420px;
  width:100%;
  border-radius:12px;
}

/* ================== CONTROLS ================== */
.controls{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:10px 0;
}
button{
  width:52px;
  height:52px;
  border-radius:50%;
  border:1px solid rgba(0,255,0,.25);
  background:rgba(0,255,0,.12);
  cursor:pointer;
}
#play-pause{
  background:var(--neon);
}

/* ================== PROGRESS ================== */
.progress-wrapper{
  display:flex;
  align-items:center;
  gap:10px;
}
.progress-container{
  flex:1;
  height:10px;
  background:rgba(255,255,255,.15);
  border-radius:999px;
  cursor:pointer;
}
.progress-bar{
  height:100%;
  width:0%;
  background:var(--neon);
  border-radius:999px;
}

/* ================== SUPPORT ================== */
.support{
  margin:22px auto;
}
.support-btn{
  padding:12px 18px;
  border-radius:999px;
  border:1px solid rgba(0,255,0,.35);
  background:rgba(0,255,0,.1);
  color:var(--ink);
  cursor:pointer;
  animation:neon 4s ease-in-out infinite;
}
@keyframes neon{
  0%,100%{ box-shadow:0 0 14px rgba(0,255,0,.2); }
  50%{ box-shadow:0 0 32px rgba(0,255,0,.45); }
}

/* ===== DESCARGA ===== */
.download-link{
  display:inline-block;
  margin-top:12px;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  color:var(--muted);
  text-decoration:none;
}
.download-link:hover{
  color:var(--neon);
  border-color:rgba(0,255,0,.35);
}

/* ================== MODAL ================== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal.open{ display:flex; }
.modal-card{
  background:#0b0808;
  padding:18px;
  border-radius:16px;
  width:100%;
  max-width:520px;
  position:relative;
}
.modal-close{
  position:absolute;
  top:10px;
  right:10px;
  width:44px;
  height:44px;
  border-radius:50%;
  cursor:pointer;
}

/* ================== PLAYLIST ================== */
.playlist{
  margin-top:20px;
  text-align:left;
}
.track{
  padding:10px;
  border-radius:10px;
  margin-bottom:6px;
  cursor:pointer;
  background:rgba(255,255,255,.05);
}
.track.current{
  background:rgba(0,255,0,.12);
  color:var(--neon);
}
</style>
</head>

<body>
<main class="wrap">

<h1>Cosmic Marciana</h1>

<div class="crt" id="crt">
  <img id="cover" src="tv.png" alt="CRT">
</div>

<div class="controls">
  <button id="prev">‚èÆ</button>
  <button id="play-pause">‚ñ∂</button>
  <button id="stop">‚èπ</button>
  <button id="next">‚è≠</button>
</div>

<div class="progress-wrapper">
  <span id="current">0:00</span>
  <div class="progress-container" id="progress">
    <div class="progress-bar" id="bar"></div>
  </div>
  <span id="total">0:00</span>
</div>

<div class="support">
  <button class="support-btn" id="open-support">Inv√≠tame a un caf√© ‚òï</button>
  <div style="margin-top:10px;font-size:12px;opacity:.85">
    Descarga libre. Si te nace, apoya la emisi√≥n con un caf√© üíö
  </div>
  <a href="la-casa-del-terror.zip" download class="download-link">
    ‚¨á Descargar el disco (ZIP)
  </a>
</div>

<div class="playlist" id="playlist">
  <div class="track" data-i="0">1. Los pobres m√°s</div>
  <div class="track" data-i="1">2. Volveremos a empezar</div>
  <div class="track" data-i="2">3. Qui√©n llena los shows</div>
</div>

<audio id="audio" preload="metadata" playsinline></audio>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-card">
    <button class="modal-close" id="close">‚úï</button>
    <p>Gracias por sostener el ruido üíö</p>
    <p>Bizum: +34 600 000 000</p>
    <a href="la-casa-del-terror.zip" download class="download-link">
      ‚¨á Descargar el disco (ZIP)
    </a>
  </div>
</div>

</main>

<script>
const audio=document.getElementById("audio");
const tracks=["lospobres.mp3","vae.mp3","shows.mp3"];
let i=Number(localStorage.getItem("cm_idx"))||0;
let saved=Number(localStorage.getItem("cm_time"))||0;

audio.src=tracks[i];

audio.addEventListener("loadedmetadata",()=>{
  if(saved>0 && saved<audio.duration){
    audio.currentTime=saved;
    audio.play();
  }
});

audio.addEventListener("timeupdate",()=>{
  if(!audio.paused){
    localStorage.setItem("cm_time",audio.currentTime);
  }
});

document.getElementById("stop").onclick=()=>{
  audio.pause();
  audio.currentTime=0;
  localStorage.removeItem("cm_time");
};

document.getElementById("play-pause").onclick=()=>{
  audio.paused?audio.play():audio.pause();
};

document.getElementById("open-support").onclick=()=>{
  document.getElementById("modal").classList.add("open");
};
document.getElementById("close").onclick=()=>{
  document.getElementById("modal").classList.remove("open");
};
</script>

</body>
</html>
