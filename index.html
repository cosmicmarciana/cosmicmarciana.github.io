<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>llllllCosmic Marciana</title>
  <link rel="icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">

  <style>
    :root{
      --neon:#00ff00;
      --ink:#eaeaea;
      --muted:#cfcfcf;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:Arial, sans-serif;
      color:var(--ink);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:32px 14px;
      overflow-x:hidden;

      background:
        repeating-radial-gradient(
          circle at 30% 40%,
          rgba(255,255,255,.04) 0,
          rgba(255,255,255,.04) 1px,
          transparent 2px,
          transparent 7px
        ),
        repeating-radial-gradient(
          circle at 70% 60%,
          rgba(255,255,255,.025) 0,
          rgba(255,255,255,.025) 1px,
          transparent 1px,
          transparent 4px
        ),
        linear-gradient(
          180deg,
          rgba(255,255,255,.06),
          rgba(0,0,0,.08)
        ),
        linear-gradient(
          180deg,
          #1a1412,
          #0e0a09 50%,
          #050303
        );
    }

    .wrap{
      width:100%;
      max-width:760px;
      text-align:center;
    }

    /* ===== CRT ===== */
    .crt{
      position:relative;
      width:fit-content;
      margin:0 auto 22px;
      isolation:isolate;
      cursor: default;
    }

    .hero{
      width:100%;
      max-width:420px;
      display:block;
      filter:drop-shadow(0 0 22px rgba(0,0,0,.85));
      animation: crt-flicker 4.5s infinite;
      will-change: transform, filter;
    }

    .crt::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.025),
          rgba(255,255,255,.025) 1px,
          transparent 1px,
          transparent 3px
        );
      pointer-events:none;
      mix-blend-mode:overlay;
      opacity:.25;
    }

    .crt:hover .hero{
      animation: crt-glitch .35s steps(2,end);
    }

    /* extra: sensación de “vivo” al hover */
    .crt:hover{ filter: saturate(1.05); }

    /* ===== TEXTO ===== */
    .text{
      font-size:15px;
      line-height:1.55;
      margin:0 auto 18px;
      max-width:50ch;
      color:var(--muted);
    }

    /* ===== WHISPER ===== */
    .whisper{
      position:relative;
      display:inline-block;
      font-size:12px;
      opacity:.72;
      letter-spacing:.20em;
      text-transform:lowercase;
      margin:-6px auto 22px;
      color:var(--muted);
      user-select:none;
      animation: whisper-jitter 1.35s infinite steps(2,end);
    }

    .whisper::before,
    .whisper::after{
      content: attr(data-text);
      position:absolute;
      inset:0;
    }

    .whisper::before{
      color: rgba(0,255,0,.75);
      transform: translate(1px,0);
      animation: whisper-glitch-1 1.15s infinite linear;
    }

    .whisper::after{
      color: rgba(255,0,0,.65);
      transform: translate(-1px,0);
      animation: whisper-glitch-2 1s infinite linear;
    }

    /* ===== CTA ===== */
    .cta{ margin-bottom:18px; }

    .btn{
      display:inline-block;
      padding:16px 28px;
      font-size:16px;
      border-radius:999px;
      text-decoration:none;
      background:var(--neon);
      color:#000;
      box-shadow:0 0 22px rgba(0,255,0,.3);
      transition:.2s ease;
      white-space:normal;
      line-height:1.25;
    }

    .btn:hover{
      transform:translateY(-1px);
      box-shadow:0 0 34px rgba(0,255,0,.45);
    }

    /* ===== ICONOS ===== */
    .links.icons{
      display:flex;
      justify-content:center;
      gap:22px;
      margin-top:6px;
    }

    .links.icons a{
      padding:6px;
      opacity:.75;
      transition:.2s ease;
    }

    .links.icons a:hover{
      opacity:1;
      transform:translateY(-1px);
    }

    .links.icons svg{
      width:22px;
      height:22px;
      fill:none;
      stroke:var(--ink);
      stroke-width:1.6;
    }

    .links.icons a:hover svg{
      stroke:var(--neon);
    }

    /* ===== FIRMA CON GLITCH SUAVE ===== */
    .sig{
      position:relative;
      margin-top:16px;
      font-size:12px;
      opacity:.65;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--muted);
    }

    .sig::before,
    .sig::after{
      content: attr(data-text);
      position:absolute;
      inset:0;
      opacity:.5;
      pointer-events:none;
    }

    .sig::before{
      color: rgba(0,255,0,.35);
      animation: sig-glitch-1 6s infinite;
    }

    .sig::after{
      color: rgba(255,0,0,.25);
      animation: sig-glitch-2 7s infinite;
    }

    .sig .hit{
      color:var(--ink);
      opacity:.9;
    }

    /* ===== ANIMACIONES ===== */
    @keyframes crt-flicker{
      0%{filter:brightness(1)}
      50%{filter:brightness(.97)}
      100%{filter:brightness(1)}
    }

    @keyframes crt-glitch{
      0%{transform:none}
      50%{transform:translateX(1px)}
      100%{transform:none}
    }

    @keyframes whisper-jitter{
      0%{transform:none}
      50%{transform:translate(.5px,-.5px)}
      100%{transform:none}
    }

    @keyframes whisper-glitch-1{
      12%{clip-path:inset(20% 0 60% 0)}
      14%{clip-path:inset(0)}
    }

    @keyframes whisper-glitch-2{
      18%{clip-path:inset(60% 0 10% 0)}
      20%{clip-path:inset(0)}
    }

    /* glitch MUY ocasional para la firma */
    @keyframes sig-glitch-1{
      0%,92%{transform:none; clip-path:inset(0)}
      93%{transform:translateX(1px); clip-path:inset(40% 0 30% 0)}
      94%{transform:none; clip-path:inset(0)}
      100%{transform:none}
    }

    @keyframes sig-glitch-2{
      0%,88%{transform:none; clip-path:inset(0)}
      89%{transform:translateX(-1px); clip-path:inset(60% 0 15% 0)}
      90%{transform:none; clip-path:inset(0)}
      100%{transform:none}
    }

    @media (max-width:480px){
      .btn{
        width:100%;
        max-width:26ch;
        padding:16px 18px;
        font-size:15px;
      }
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; }
    }
  </style>
</head>

<body>
  <main class="wrap">

    <div class="crt" aria-label="Televisor CRT">
      <img src="tv.png" alt="Televisor CRT con Cosmic Marciana – La casa del terror" class="hero" />
    </div>

    <p class="text">
      Señales rotas. Pop electrónico.<br />
      Transmisiones desde otra dimensión.
    </p>

    <div class="whisper" data-text="transmisión en curso…">transmisión en curso…</div>

    <div class="cta">
      <a class="btn" href="player.html">¿Te atreves a entrar en la casa del terror?</a>
    </div>

    <div class="links icons">
      <a href="https://www.instagram.com/cosmicmarciana" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
        <svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="4"/><circle cx="17.5" cy="6.5" r="1.2"/></svg>
      </a>
      <a href="https://open.spotify.com/intl-es/artist/0qSO1brlu9jrjrhmMldEVL" target="_blank" rel="noopener noreferrer" aria-label="Spotify">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M7 10.5c3-1 7-.8 10 .6"/><path d="M7.5 13c2.5-.7 6-.5 8.5 .5"/><path d="M8 15.5c2-.5 4.5-.4 6.5 .4"/></svg>
      </a>
      <a href="mailto:cosmicmarciana@gmail.com" aria-label="Contacto">
        <svg viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M3 7l9 6 9-6"/></svg>
      </a>
    </div>

    <div class="sig" data-text="COSMIC MARCIANA 2026 · EMISIÓN NO AUTORIZADA · NO AJUSTAR EL DIAL">
      COSMIC MARCIANA <span class="hit">2026</span> · EMISIÓN NO AUTORIZADA · NO AJUSTAR EL DIAL
    </div>

  </main>

  <!-- ===== VHS NOISE (WebAudio) ===== -->
  <script>
  (() => {
    const tv = document.querySelector(".crt");
    if (!tv) return;

    let ctx, master, noiseGain, humGain, lp, hp, wobble, wobbleDepth;
    let running = false;
    let unlocked = false;

    const clamp01 = (n) => Math.max(0, Math.min(1, n));

    function makeNoiseBuffer(audioCtx, seconds = 2.2) {
      const rate = audioCtx.sampleRate;
      const length = Math.floor(rate * seconds);
      const buffer = audioCtx.createBuffer(1, length, rate);
      const data = buffer.getChannelData(0);
      for (let i = 0; i < length; i++) data[i] = (Math.random() * 2 - 1);
      return buffer;
    }

    function createGraph() {
      ctx = new (window.AudioContext || window.webkitAudioContext)();

      // master final (lo que oyes)
      master = ctx.createGain();
      master.gain.value = 0; // mute inicial
      master.connect(ctx.destination);

      // noise source
      const noiseSrc = ctx.createBufferSource();
      noiseSrc.buffer = makeNoiseBuffer(ctx, 2.2);
      noiseSrc.loop = true;

      noiseGain = ctx.createGain();
      noiseGain.gain.value = 0.65;

      // filtros estilo VHS (hiss)
      hp = ctx.createBiquadFilter();
      hp.type = "highpass";
      hp.frequency.value = 160;

      lp = ctx.createBiquadFilter();
      lp.type = "lowpass";
      lp.frequency.value = 5200;

      // hum 50/100 Hz (muy suave)
      const hum1 = ctx.createOscillator();
      hum1.type = "sine";
      hum1.frequency.value = 50;

      const hum2 = ctx.createOscillator();
      hum2.type = "sine";
      hum2.frequency.value = 100;

      humGain = ctx.createGain();
      humGain.gain.value = 0.055;

      // wobble / tracking (modulando el lowpass)
      wobble = ctx.createOscillator();
      wobble.type = "sine";
      wobble.frequency.value = 2.4;

      wobbleDepth = ctx.createGain();
      wobbleDepth.gain.value = 900;

      wobble.connect(wobbleDepth);
      wobbleDepth.connect(lp.frequency);

      // chain
      noiseSrc.connect(noiseGain);
      noiseGain.connect(hp);
      hp.connect(lp);
      lp.connect(master);

      hum1.connect(humGain);
      hum2.connect(humGain);
      humGain.connect(master);

      // start
      noiseSrc.start();
      hum1.start();
      hum2.start();
      wobble.start();
    }

    async function unlock() {
      if (unlocked) return;
      try{
        if (!ctx) createGraph();
        if (ctx.state === "suspended") await ctx.resume();
        unlocked = true;
      }catch{}
    }

    function fadeMasterTo(target, ms = 160) {
      if (!master || !ctx) return;
      target = clamp01(target);
      const now = ctx.currentTime;
      master.gain.cancelScheduledValues(now);
      master.gain.setValueAtTime(master.gain.value, now);
      master.gain.linearRampToValueAtTime(target, now + ms / 1000);
    }

    function setIntensity(intensity01) {
      if (!ctx || !noiseGain || !humGain || !lp || !wobbleDepth) return;
      const g = clamp01(intensity01);

      // base + subida
      noiseGain.gain.setValueAtTime(0.40 + g * 0.70, ctx.currentTime);
      humGain.gain.setValueAtTime(0.025 + g * 0.09, ctx.currentTime);

      // más “brillo” y “tracking” cuando sube
      lp.frequency.setValueAtTime(3800 + g * 5200, ctx.currentTime);
      wobbleDepth.gain.setValueAtTime(450 + g * 1150, ctx.currentTime);
    }

    async function startNoise() {
      running = true;
      await unlock();
      if (!unlocked) return;

      // mordisco inicial
      setIntensity(0.95);
      fadeMasterTo(0.22, 120);
    }

    function stopNoise() {
      running = false;
      fadeMasterTo(0, 180);
    }

    // Hover desktop
    tv.addEventListener("pointerenter", () => { startNoise(); }, { passive:true });
    tv.addEventListener("pointerleave", () => { stopNoise(); }, { passive:true });

    // Intensidad según posición (centro = más)
    tv.addEventListener("pointermove", (e) => {
      if (!running || !unlocked) return;
      const r = tv.getBoundingClientRect();
      const x = (e.clientX - r.left) / r.width;
      const y = (e.clientY - r.top) / r.height;
      const dx = x - 0.5, dy = y - 0.5;
      const dist = Math.min(1, Math.sqrt(dx*dx + dy*dy) / 0.78);
      const intensity = 1 - dist;
      setIntensity(intensity);
    }, { passive:true });

    // Desbloqueo por gesto (para Safari/iOS)
    tv.addEventListener("pointerdown", unlock, { passive:true });
    window.addEventListener("pointerdown", unlock, { once:true, passive:true });
    window.addEventListener("touchstart", unlock, { once:true, passive:true });

    // Si se oculta la pestaña, apagar
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) stopNoise();
    });

  })();
  </script>
</body>
</html>

